{% extends "base.html" %}
{% block title %}Statistik{% endblock %}
{% block content %}
  <h1 class="pb-2 text-center">Statistik</h1>
  <div class="text-responsive">
    {% for user in users %}
      {% for result in results %}
        {% if user.id == result.user_id %}
          <h2 class="text-center p-3">{{ user.username.capitalize() }}</h2>
          <div id="{{ user.id }}-carousel" class="carousel slide bg-white shadow border lazy-load" data-ride="carousel" data-interval="false" data-user-id="{{ user.id }}" data-total="{{ result.total }}">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <h3 class="text-center p-3">Översikt</h3>
                <div class="text-center">
                  <p>Total:
                    {{ result.total }}</p>
                  <p>Finished:
                    {{ result.finished }}</p>
                  <p>Correct:
                    {{ result.correct }}</p>
                  <p>Incorrect:
                    {{ result.incorrect }}</p>
                  <p>1:
                    {{ result.tip_1 }}</p>
                  <p>X:
                    {{ result.tip_X }}</p>
                  <p>2:
                    {{ result.tip_2 }}</p>
                </div>
              </div>
              <div class="carousel-item">
                <h3 class="text-center p-3">Antal rätt</h3>
                <canvas id="{{ user.id }}-correct-chart" class="pb-4" data-correct="{{ result.correct }}" data-incorrect="{{ result.incorrect }}" style="max-width: 400px; margin-right: auto; margin-left: auto;"></canvas>
              </div>
              <div class="carousel-item">
                <h3 class="text-center p-3">Tipfördelning</h3>
                <canvas id="{{ user.id }}-tip-chart" class="pb-4" data-tip-one="{{ result.tip_1 }}" data-tip-x="{{ result.tip_X }}" data-tip-two="{{ result.tip_2 }}" style="max-width: 400px; margin-right: auto; margin-left: auto;"></canvas>
              </div>
              <div class="carousel-item">
                <h3 class="text-center p-3">Omgångsstatistik</h3>
                <canvas id="{{ user.id }}-round-scores" data-rounds="{{ result.round_scores }}" style="max-width: 770px; margin-right: auto; margin-left: auto;"></canvas>
              </div>
            </div>
            <a class="carousel-control-prev" href="#{{ user.id }}-carousel" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true" style="filter: invert(100%);"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#{{ user.id }}-carousel" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true" style="filter: invert(100%);"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endblock %}
{% block script %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/stats.js') }}"></script>
{% endblock %}
