{% extends "base.html" %}
{% block title %}Statistik{% endblock %}
{% block content %}
  <h1 class="pb-2 text-center">Statistik</h1>
  <div class="text-responsive">
    <div id="carousel" class="carousel slide bg-white shadow border lazy-load" data-ride="carousel" data-interval="false">
      <div class="carousel-inner">
        <div class="carousel-item active p-8">
          <h3 class="text-center p-3">Antal rätt</h3>
          <canvas id="correct-chart" class="pb-4" style="max-width: 400px; margin-right: auto; margin-left: auto;"></canvas>
        </div>
        <div class="carousel-item p-8">
          <h3 class="text-center p-3">Tipfördelning</h3>
          <canvas id="tip-chart" class="pb-4" style="max-width: 400px; margin-right: auto; margin-left: auto;"></canvas>
        </div>
        <div class="carousel-item p-2">
          <h3 class="text-center p-3">Omgångsstatistik</h3>
          <canvas id="round-scores" style="max-width: 768px; margin-right: auto; margin-left: auto;"></canvas>
        </div>
      </div>
      <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true" style="filter: invert(100%);"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true" style="filter: invert(100%);"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </div>
  {% for user in users %}
    {% for result in results %}
      {% if user.id == result.user_id %}
        <p id="{{ user.username }}-total" hidden="hidden">
          {{ result.total }}
        </p>
        <p id="{{ user.username }}-correct" hidden="hidden">
          {{ result.correct }}
        </p>
        <p id="{{ user.username }}-incorrect" hidden="hidden">
          {{ result.incorrect }}
        </p>
        <p id="{{ user.username }}-tip-1" hidden="hidden">
          {{ result.tip_1 }}
        </p>
        <p id="{{ user.username }}-tip-X" hidden="hidden">
          {{ result.tip_X }}
        </p>
        <p id="{{ user.username }}-tip-2" hidden="hidden">
          {{ result.tip_2 }}
        </p>
        <p id="{{ user.username }}-round-scores" hidden="hidden">
          {{ result.round_scores }}
        </p>
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endblock %}
{% block script %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/stats.js') }}"></script>
{% endblock %}
